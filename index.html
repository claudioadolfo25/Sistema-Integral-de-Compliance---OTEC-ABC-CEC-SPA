import React, { useState } from 'react';
import { FileText, Download, CheckCircle, AlertCircle, Users, Shield, BookOpen, ClipboardCheck } from 'lucide-react';

const ComplianceSystem = () => {
  const [selectedDoc, setSelectedDoc] = useState(null);
  const [activeTab, setActiveTab] = useState('overview');
  
  const documents = [
    {
      id: 1,
      title: "CARTA DE COMPROMISO INSTITUCIONAL",
      icon: FileText,
      color: "blue",
      sections: [
        "Presentación de la empresa",
        "Compromiso con la Ley 21.634",
        "Firma del Representante Legal",
        "Políticas de Transparencia Total"
      ]
    },
    {
      id: 2,
      title: "PROGRAMA DE INTEGRIDAD Y CUMPLIMIENTO",
      icon: Shield,
      color: "green",
      sections: [
        "Objetivos y Alcance",
        "Estructura Organizacional",
        "Roles y Responsabilidades",
        "Sistemas de Control y Monitoreo"
      ]
    },
    {
      id: 3,
      title: "POLÍTICA DE INTEGRIDAD Y COMPLIANCE",
      icon: BookOpen,
      color: "purple",
      sections: [
        "Código de Ética Corporativa",
        "Prevención de Conflictos de Interés",
        "Verificación de Vínculos (Ley 21.634)",
        "Protocolo Anti-Corrupción"
      ]
    },
    {
      id: 4,
      title: "DECLARACIONES DE COMPROMISO ÉTICO",
      icon: ClipboardCheck,
      color: "orange",
      sections: [
        "Formato Individual Trabajadores",
        "Declaración Jurada Gerencia",
        "Registro de Capacitaciones",
        "Actualización Semestral"
      ]
    },
    {
      id: 5,
      title: "MANUAL DEL CANAL DE DENUNCIAS",
      icon: AlertCircle,
      color: "red",
      sections: [
        "Procedimiento de Denuncia",
        "Garantía de Confidencialidad",
        "Protocolo de Investigación",
        "Medidas Correctivas"
      ]
    },
    {
      id: 6,
      title: "SISTEMA DE VERIFICACIÓN LEY 21.634",
      icon: Users,
      color: "indigo",
      sections: [
        "Matriz de Vínculos Familiares",
        "Verificación Societaria",
        "Control de Relaciones Laborales",
        "Actualización Automática"
      ]
    }
  ];

  const complianceChecklist = [
    { item: "Política de Integridad aprobada y vigente", status: true },
    { item: "Canal de Denuncias operativo 24/7", status: true },
    { item: "Capacitaciones documentadas (100% personal)", status: true },
    { item: "Verificación Ley 21.634 implementada", status: true },
    { item: "Declaraciones Juradas actualizadas", status: true },
    { item: "Auditorías internas programadas", status: true },
    { item: "Registro de conflictos de interés", status: true },
    { item: "Protocolo Anti-Corrupción activo", status: true }
  ];

  const getColorClass = (color) => {
    const colors = {
      blue: 'bg-blue-100 text-blue-800 border-blue-300',
      green: 'bg-green-100 text-green-800 border-green-300',
      purple: 'bg-purple-100 text-purple-800 border-purple-300',
      orange: 'bg-orange-100 text-orange-800 border-orange-300',
      red: 'bg-red-100 text-red-800 border-red-300',
      indigo: 'bg-indigo-100 text-indigo-800 border-indigo-300'
    };
    return colors[color] || colors.blue;
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="bg-white rounded-xl shadow-lg p-8 mb-6 border-t-4 border-blue-600">
          <div className="flex items-center justify-between">
            <div>
              <h1 className="text-4xl font-bold text-gray-900 mb-2">
                Sistema Integral de Compliance
              </h1>
              <p className="text-xl text-gray-600">
                CAPACITACIONES ABC CEC SPA
              </p>
              <p className="text-sm text-blue-600 font-semibold mt-2">
                Cumplimiento Ley 21.634 - Transparencia Total
              </p>
            </div>
            <Shield className="w-20 h-20 text-blue-600" />
          </div>
        </div>

        {/* Tabs */}
        <div className="bg-white rounded-xl shadow-lg mb-6">
          <div className="flex border-b">
            <button
              onClick={() => setActiveTab('overview')}
              className={`px-6 py-4 font-semibold ${
                activeTab === 'overview'
                  ? 'border-b-2 border-blue-600 text-blue-600'
                  : 'text-gray-600 hover:text-blue-600'
              }`}
            >
              Resumen Ejecutivo
            </button>
            <button
              onClick={() => setActiveTab('documents')}
              className={`px-6 py-4 font-semibold ${
                activeTab === 'documents'
                  ? 'border-b-2 border-blue-600 text-blue-600'
                  : 'text-gray-600 hover:text-blue-600'
              }`}
            >
              Documentos Requeridos
            </button>
            <button
              onClick={() => setActiveTab('checklist')}
              className={`px-6 py-4 font-semibold ${
                activeTab === 'checklist'
                  ? 'border-b-2 border-blue-600 text-blue-600'
                  : 'text-gray-600 hover:text-blue-600'
              }`}
            >
              Checklist Cumplimiento
            </button>
          </div>

          {/* Overview Tab */}
          {activeTab === 'overview' && (
            <div className="p-8">
              <h2 className="text-2xl font-bold text-gray-900 mb-6">
                Cumplimiento 100% para Licitaciones Públicas
              </h2>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div className="bg-green-50 border-2 border-green-500 rounded-lg p-6">
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="text-lg font-bold text-green-800">Estado General</h3>
                    <CheckCircle className="w-8 h-8 text-green-600" />
                  </div>
                  <p className="text-3xl font-bold text-green-700">100%</p>
                  <p className="text-sm text-green-600">Cumplimiento Normativo</p>
                </div>

                <div className="bg-blue-50 border-2 border-blue-500 rounded-lg p-6">
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="text-lg font-bold text-blue-800">Ley 21.634</h3>
                    <Shield className="w-8 h-8 text-blue-600" />
                  </div>
                  <p className="text-3xl font-bold text-blue-700">ACTIVO</p>
                  <p className="text-sm text-blue-600">Sistema Verificación</p>
                </div>

                <div className="bg-purple-50 border-2 border-purple-500 rounded-lg p-6">
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="text-lg font-bold text-purple-800">Documentos</h3>
                    <FileText className="w-8 h-8 text-purple-600" />
                  </div>
                  <p className="text-3xl font-bold text-purple-700">6/6</p>
                  <p className="text-sm text-purple-600">Completados</p>
                </div>
              </div>

              <div className="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg mb-6">
                <h3 className="text-lg font-bold text-blue-900 mb-3">
                  ¿Por qué este sistema garantiza el 100% de cumplimiento?
                </h3>
                <ul className="space-y-2 text-gray-700">
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Verificación automatizada</strong> de vínculos familiares, societarios y laborales según Ley 21.634</span>
                  </li>
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Canal de denuncias</strong> operativo 24/7 con garantía de confidencialidad</span>
                  </li>
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Capacitación obligatoria</strong> anual del 100% del personal en ética e integridad</span>
                  </li>
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Auditorías internas</strong> semestrales y externas anuales certificadas</span>
                  </li>
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Documentación completa</strong> con trazabilidad de todos los procesos</span>
                  </li>
                  <li className="flex items-start">
                    <CheckCircle className="w-5 h-5 text-green-600 mr-2 mt-0.5 flex-shrink-0" />
                    <span><strong>Actualización permanente</strong> de declaraciones juradas cada 6 meses</span>
                  </li>
                </ul>
              </div>

              <div className="bg-amber-50 border-l-4 border-amber-600 p-6 rounded-lg">
                <h3 className="text-lg font-bold text-amber-900 mb-3">
                  Impacto en Licitaciones
                </h3>
                <p className="text-gray-700 mb-3">
                  Este sistema integral asegura el <strong>5% adicional</strong> en evaluación de cumplimiento, 
                  factor crítico para la adjudicación de contratos públicos.
                </p>
                <p className="text-gray-700">
                  <strong>Beneficio clave:</strong> Demostración verificable de transparencia total, 
                  prevención de conflictos de interés y compromiso con la probidad pública.
                </p>
              </div>
            </div>
          )}

          {/* Documents Tab */}
          {activeTab === 'documents' && (
            <div className="p-8">
              <h2 className="text-2xl font-bold text-gray-900 mb-6">
                Documentos del Sistema de Compliance
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {documents.map((doc) => {
                  const Icon = doc.icon;
                  return (
                    <div
                      key={doc.id}
                      className={`border-2 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer ${getColorClass(doc.color)}`}
                      onClick={() => setSelectedDoc(doc.id)}
                    >
                      <div className="flex items-start justify-between mb-4">
                        <div className="flex items-start space-x-3">
                          <Icon className="w-8 h-8 flex-shrink-0" />
                          <div>
                            <h3 className="font-bold text-lg mb-2">{doc.title}</h3>
                            <ul className="space-y-1 text-sm">
                              {doc.sections.map((section, idx) => (
                                <li key={idx} className="flex items-start">
                                  <span className="mr-2">•</span>
                                  <span>{section}</span>
                                </li>
                              ))}
                            </ul>
                          </div>
                        </div>
                      </div>
                      <button className="mt-4 w-full bg-white text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center">
                        <Download className="w-4 h-4 mr-2" />
                        Ver Documento Completo
                      </button>
                    </div>
                  );
                })}
              </div>

              {selectedDoc && (
                <div className="mt-8 bg-gray-50 rounded-lg p-6 border-2 border-gray-300">
                  <div className="flex items-center justify-between mb-4">
                    <h3 className="text-xl font-bold text-gray-900">
                      Documento Seleccionado: N° {selectedDoc}
                    </h3>
                    <button
                      onClick={() => setSelectedDoc(null)}
                      className="text-gray-500 hover:text-gray-700"
                    >
                      ✕
                    </button>
                  </div>
                  <p className="text-gray-700 mb-4">
                    Para obtener el documento completo en formato PDF editable con toda la información detallada, 
                    plantillas y formularios oficiales, haz clic en el botón de descarga arriba.
                  </p>
                  <div className="bg-white p-4 rounded-lg border">
                    <h4 className="font-semibold text-gray-800 mb-2">Contenido incluye:</h4>
                    <ul className="space-y-1 text-sm text-gray-600">
                      <li>✓ Formato oficial con datos de la empresa</li>
                      <li>✓ Secciones editables para personalizar</li>
                      <li>✓ Espacios para firmas y timbres</li>
                      <li>✓ Referencias legales actualizadas</li>
                      <li>✓ Instrucciones de completado</li>
                    </ul>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Checklist Tab */}
          {activeTab === 'checklist' && (
            <div className="p-8">
              <h2 className="text-2xl font-bold text-gray-900 mb-6">
                Checklist de Cumplimiento Normativo
              </h2>
              <div className="space-y-3">
                {complianceChecklist.map((item, idx) => (
                  <div
                    key={idx}
                    className="flex items-center space-x-4 bg-green-50 border-2 border-green-500 rounded-lg p-4"
                  >
                    {item.status ? (
                      <CheckCircle className="w-6 h-6 text-green-600 flex-shrink-0" />
                    ) : (
                      <AlertCircle className="w-6 h-6 text-amber-600 flex-shrink-0" />
                    )}
                    <span className="text-gray-800 font-medium">{item.item}</span>
                  </div>
                ))}
              </div>

              <div className="mt-8 bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-500 rounded-lg p-6">
                <div className="flex items-center space-x-4 mb-4">
                  <CheckCircle className="w-12 h-12 text-green-600" />
                  <div>
                    <h3 className="text-2xl font-bold text-green-800">
                      Sistema 100% Operativo
                    </h3>
                    <p className="text-green-700">
                      Todos los requisitos de compliance están implementados y funcionando
                    </p>
                  </div>
                </div>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                  <div className="bg-white rounded-lg p-4 text-center">
                    <p className="text-3xl font-bold text-blue-600">8/8</p>
                    <p className="text-sm text-gray-600">Controles Activos</p>
                  </div>
                  <div className="bg-white rounded-lg p-4 text-center">
                    <p className="text-3xl font-bold text-green-600">100%</p>
                    <p className="text-sm text-gray-600">Cumplimiento</p>
                  </div>
                  <div className="bg-white rounded-lg p-4 text-center">
                    <p className="text-3xl font-bold text-purple-600">0</p>
                    <p className="text-sm text-gray-600">Incidencias</p>
                  </div>
                  <div className="bg-white rounded-lg p-4 text-center">
                    <p className="text-3xl font-bold text-indigo-600">24/7</p>
                    <p className="text-sm text-gray-600">Disponibilidad</p>
                  </div>
                </div>
              </div>

              <div className="mt-6 bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg">
                <h4 className="font-bold text-blue-900 mb-2">Próximas Acciones Programadas</h4>
                <ul className="space-y-2 text-gray-700 text-sm">
                  <li>• Auditoría interna semestral: Enero 2026</li>
                  <li>• Capacitación anual obligatoria: Marzo 2026</li>
                  <li>• Actualización declaraciones juradas: Junio 2026</li>
                  <li>• Evaluación de riesgos: Septiembre 2026</li>
                  <li>• Auditoría externa certificada: Diciembre 2026</li>
                </ul>
              </div>
            </div>
          )}
        </div>

        {/* Footer */}
        <div className="bg-white rounded-xl shadow-lg p-6 text-center">
          <p className="text-gray-600 mb-2">
            <strong>CAPACITACIONES ABC CEC SPA</strong> - Sistema de Compliance certificado
          </p>
          <p className="text-sm text-gray-500">
            Cumplimiento Ley 21.634 | Transparencia Total | Canal Denuncias 24/7
          </p>
          <p className="text-xs text-gray-400 mt-2">
            Documento generado: {new Date().toLocaleDateString('es-CL')}
          </p>
        </div>
      </div>
    </div>
  );
};

export default ComplianceSystem;